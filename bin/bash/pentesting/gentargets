#!/usr/bin/env bash

#Generates a list of target ip addresses from a parent network address provided as an argument, and saves the output to a textfile.
#Syntax: gentargets <network ip>
#Example: gentargets 172.16.10

if [ -z "${1}" ]; then #Check whether the user provided an argument
    echo "You must provide the target network ip, ex. gentargets 172.16.10"
    exit 1
fi 

FILENAME="${1}-hosts.txt" #Sets the output file name
DIRECTORY="./" #Sets output directory to current working directory

if [ -f "${DIRECTORY}${FILENAME}" ]; then #Check if the file already exists, and if not, create it.
    echo "${FILENAME} already exists!"
    exit 1
else
    touch "${DIRECTORY}${FILENAME}"
    for ip in $(seq 1 254); do
        echo "${1}.${ip}" >> "${DIRECTORY}${FILENAME}" #Append the possible machine ip addresses to the end of the provided network address, and append the result to the output file.
    done
fi

if [ -f "${DIRECTORY}${FILENAME}" ] && [ -s "${DIRECTORY}${FILENAME}" ]; then #If the output file was created and the size is greater than zero, then the script succeeded. Otherwise, it failed.
    echo "Subdomain list successfully generated!"
    exit 0 #Successful exit mode
else
    echo "Target list generation failed!"
    exit 1 #Failure exit mode
fi 